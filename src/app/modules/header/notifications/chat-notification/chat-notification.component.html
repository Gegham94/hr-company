<div class='header__notification' (click)='$event.stopPropagation()'>
  <div class='header__notification-content' (click)='openNotificationsListAction($event)'>
    <button class='header__notification-button' *ngIf='!mobile'>
      <svg width='23' height='20' viewBox='0 0 23 20' fill='none' xmlns='http://www.w3.org/2000/svg'>
        <path
          d='M15.7783 0H2.58047C1.15743 0 0 1.15743 0 2.58047V14.1458C0 14.6935 0.619448 15.0023 1.0567 14.69L4.73221 12.0676C5.04062 11.8479 5.4034 11.7316 5.78222 11.7316H13.8664C15.2894 11.7316 16.4468 10.5741 16.4468 9.1511V0.668517C16.4468 0.299496 16.1474 0 15.7783 0ZM12.5311 8.09841H4.80708C4.43806 8.09841 4.13856 7.79936 4.13856 7.42989C4.13856 7.06087 4.43806 6.76138 4.80708 6.76138H12.5311C12.9001 6.76138 13.1996 7.06087 13.1996 7.42989C13.1996 7.79936 12.9001 8.09841 12.5311 8.09841ZM12.5311 4.97867H4.80708C4.43806 4.97867 4.13856 4.67962 4.13856 4.31015C4.13856 3.94113 4.43806 3.64163 4.80708 3.64163H12.5311C12.9001 3.64163 13.1996 3.94113 13.1996 4.31015C13.1996 4.67962 12.9001 4.97867 12.5311 4.97867Z'
          fill='white'/>
        <path
          d='M22.8189 7.76573V19.3306C22.8189 19.8747 22.2025 20.1894 21.7622 19.8748L18.0866 17.2529C17.7782 17.0332 17.4155 16.9168 17.0366 16.9168H8.95248C7.52943 16.9168 6.37201 15.759 6.37201 14.3359V13.0684H13.8665C16.0267 13.0684 17.784 11.3111 17.784 9.1509V5.18481H20.2384C21.6614 5.18481 22.8189 6.34268 22.8189 7.76573Z'
          fill='white'/>
      </svg>
    </button>
    <button class='header__notification-button' *ngIf='mobile'>
      <svg width='23' height='20' viewBox='0 0 23 20' fill='none' xmlns='http://www.w3.org/2000/svg'>
        <path
          d='M15.7783 0H2.58047C1.15743 0 0 1.15743 0 2.58047V14.1458C0 14.6935 0.619448 15.0023 1.0567 14.69L4.73221 12.0676C5.04062 11.8479 5.4034 11.7316 5.78222 11.7316H13.8664C15.2894 11.7316 16.4468 10.5741 16.4468 9.1511V0.668517C16.4468 0.299496 16.1474 0 15.7783 0ZM12.5311 8.09841H4.80708C4.43806 8.09841 4.13856 7.79936 4.13856 7.42989C4.13856 7.06087 4.43806 6.76138 4.80708 6.76138H12.5311C12.9001 6.76138 13.1996 7.06087 13.1996 7.42989C13.1996 7.79936 12.9001 8.09841 12.5311 8.09841ZM12.5311 4.97867H4.80708C4.43806 4.97867 4.13856 4.67962 4.13856 4.31015C4.13856 3.94113 4.43806 3.64163 4.80708 3.64163H12.5311C12.9001 3.64163 13.1996 3.94113 13.1996 4.31015C13.1996 4.67962 12.9001 4.97867 12.5311 4.97867Z'
          fill='#08a652'/>
        <path
          d='M22.8189 7.76573V19.3306C22.8189 19.8747 22.2025 20.1894 21.7622 19.8748L18.0866 17.2529C17.7782 17.0332 17.4155 16.9168 17.0366 16.9168H8.95248C7.52943 16.9168 6.37201 15.759 6.37201 14.3359V13.0684H13.8665C16.0267 13.0684 17.784 11.3111 17.784 9.1509V5.18481H20.2384C21.6614 5.18481 22.8189 6.34268 22.8189 7.76573Z'
          fill='#08a652'/>
      </svg>
    </button>
    <span
      *ngIf='count > 0'
      class='header__notification-count'
    >
       {{count > 99 ? 99 + '+' : count}}
      </span>
  </div>
  <div class='header__drop-menu' *ngIf='isDropdownOpen$ | async' (click)='$event.stopPropagation()'>
    <div class='header__drop-menu-title'>
      <div><b>{{"NOTIFICATIONS.CHAT" | translate}}</b></div>
      <img
        class='header__drop-menu-close'
        src='assets/img/icon/close-dropdown-icon.svg' alt='close-icon'
        (click)='openNotificationsListAction($event, false)'
      >
    </div>
    <div
      class="header__drop-menu-notification__block"
      [class.mobile]="screenSize === 'MOBILE'"
    >
      <cdk-virtual-scroll-viewport
        [itemSize]="virtualScrollItemSize"
        [minBufferPx]="virtualScrollItemSize"
        [maxBufferPx]="virtualScrollItemSize * 10"
        (scrolledIndexChange)="getNextBatch($event)"
        [style.height.px]="virtualContainerHeight"
        class="viewport scrollbar-green"
      >
        <div *cdkVirtualFor="let item of notificationData">
          <hr-chat-notification-item
            [item]='item'
            [hasNotificationCount]="hasNotification"
            (selectedNotification)="selectNotification($event)"
          ></hr-chat-notification-item>
        </div>
        <hr-chat-notification-item
          *ngIf="hasNotification==0"
          [hasNotificationCount]="hasNotification"
        ></hr-chat-notification-item>
        <ng-container *ngIf="loadingMoreNotifications$ | async">
          <div class="loader-container">
            <div class="loader"></div>
            <p class="loader_text">Загрузка данных...</p>
          </div>
        </ng-container>
      </cdk-virtual-scroll-viewport>
    </div>
  </div>
</div>
